<template>
  <div class="img-move-wrapper">
    <button @click="Vuelo1">vuelo de prueba 1</button>
    <button @click="Vuelo1">vuelo de prueba 2</button>
    <img
      id="torre"
      src="src/assets/primerapersona/edificio.jpg"
      class="img-move img-move-1 img-fluid"
    />

    <img
      id="imagen"
      src="src/assets/primerapersona/imagen0.jpg"
      class="img-move img-move-2 img-fluid"
    />
  </div>
</template>

<script>
  import store from '@/store'
  export default {
    methods: {
      funcionVerificar() {
        var imagen = document.getElementById('imagen')
        let altura = store.getters.altura
        if (altura === 0) {
          console.log('test: inicio')
        } else if (altura > 0) {
          imagen.src = 'src/assets/primerapersona/imagen0.jpg'
          console.log('test: despegue')
          imagen.src = 'src/assets/primerapersona/imagen1.jpg'
        }

        const Avionvivo = store.getters.Avionvivo
        if (Avionvivo === 0) {
          // elmati ve esto
        }
      },
      //vuelo en linea recta
      Vuelo1() {
        //los timer se ejecutan al mismo tiempo

        //variables del store a modificar
        //trotle      (potencia)                |store.getters.getThrottleDepth   | setThrottleDepth
        //mixture  (potencia)                   |store.getters.getEstadoMixture   | setEstadoMixture
        //angulo subida  (artificial horizon)   |store.getters.anguloPitch        | no usado xd
        //modificar yoke pich                   |

        //estado inicial: iniciando despegue
        console.log('inicia el vuelo predefinido 1- Pasos:')
        console.log('1.- gana velocidad en tierra')
        console.log('2.- gana altura hasta x punto')
        console.log('3.- mantendra el vuelo')
        console.log('4.- chocara y explotara')

        setTimeout(() => {
          //cambio de valores
          store.dispatch('setEstadoPitch_yoke', 0)
          store.dispatch('setThrottleDepth', 10)
          store.dispatch('setEstadoMixture', 10)

          console.log('------------------')
          console.log('mati inicia movimiento en tierra')
          console.log('trotle: ', store.getters.getThrottleDepth)
          console.log('mixture: ', store.getters.getEstadoMixture)
          console.log('angulo pich: ', store.getters.anguloPitch)
        }, 2000)

        //estado consiguiendo altura
        setTimeout(() => {
          //cambio de valores
          store.dispatch('setEstadoPitch_yoke', 20)
          store.dispatch('setThrottleDepth', 10)
          store.dispatch('setEstadoMixture', 10)

          console.log('------------------')
          console.log('mati conseguir altura')
          console.log('trotle: ', store.getters.getThrottleDepth)
          console.log('mixture: ', store.getters.getEstadoMixture)
          console.log('angulo pich: ', store.getters.anguloPitch)
        }, 4000)

        //estado manteniendo se en el aire
        setTimeout(() => {
          //cambio de valores
          store.dispatch('setEstadoPitch_yoke', 0)
          store.dispatch('setThrottleDepth', 30)
          store.dispatch('setEstadoMixture', 30)

          console.log('------------------')
          console.log('mati baja aire')
          console.log('trotle: ', store.getters.getThrottleDepth)
          console.log('mixture: ', store.getters.getEstadoMixture)
          console.log('angulo pich: ', store.getters.anguloPitch)
        }, 8000)

        //estado bajando hasta colicionar
        setTimeout(() => {
          //cambio de valores
          store.dispatch('setEstadoPitch_yoke', -10)
          store.dispatch('setThrottleDepth', 10)
          store.dispatch('setEstadoMixture', 10)

          console.log('------------------')
          console.log('mati subiendo altura')
          console.log('trotle: ', store.getters.getThrottleDepth)
          console.log('mixture: ', store.getters.getEstadoMixture)
          console.log('angulo pich: ', store.getters.anguloPitch)
        }, 8500)

        setTimeout(() => {
          //cambio de valores
          store.dispatch('setEstadoPitch_yoke', 0)
          store.dispatch('setThrottleDepth', 10)
          store.dispatch('setEstadoMixture', 10)

          console.log('------------------')
          console.log('mati subiendo altura')
          console.log('trotle: ', store.getters.getThrottleDepth)
          console.log('mixture: ', store.getters.getEstadoMixture)
          console.log('angulo pich: ', store.getters.anguloPitch)
        }, 15000)

        setTimeout(() => {
          //cambio de valores
          store.dispatch('setEstadoPitch_yoke', 0)
          store.dispatch('setThrottleDepth', 0)
          store.dispatch('setEstadoMixture', 0)

          console.log('------------------')
          console.log('mati subiendo altura')
          console.log('trotle: ', store.getters.getThrottleDepth)
          console.log('mixture: ', store.getters.getEstadoMixture)
          console.log('angulo pich: ', store.getters.anguloPitch)
        }, 30000)
      },
    },
  }
</script>

<style scoped>
  .vistaPP {
    width: 300px;
    height: 900px;
    background-size: cover;
    background-position: center;
    position: absolute;
  }

  .img-move {
    position: absolute;
  }

  .img-move-1 {
    left: 400px;
    top: 100px;

    visibility: hidden;

    z-index: 1; /* This image will be on top */
  }

  .img-move-2 {
    left: 0px;
    top: 20px;
    z-index: 0;
  }

  .img-move-wrapper {
    position: relative;
    overflow: hidden;
    width: 900px;
    height: 300px;
    /*max-width: 1140px; /* Bootstrap 4 container max-width for extra large devices */
    margin: 0 auto;
  }

  .edificio_mapa {
    top: 50px; /* Ajusta la posici√≥n vertical de la imagen superpuesta */
    left: 50px;
    z-index: 2;
  }

  .vistaAvion {
    position: absolute;
    width: 900px;
    height: 300px;
    z-index: 1;
  }
</style>
